"use strict";ns("ec.expenses"),ec.expenses.EXPENSE_LINE_DIRECTIVE_NAME="ecExpenseLine",ec.expenses.expenseLineDirective=function(){return{scope:{expense:"=",remove:"&"},link:function(e){e.getOperationStyle=function(e){return"="===e?"total":"/"===e?"split":"description"}},templateUrl:"js/components/expenses/expense-line.html"}},ns("ec.expenses"),ec.expenses.EXPENSES_DIRECTIVE_NAME="ecExpenses",ec.expenses.expensesDirective=function(){return{scope:{expenses:"=",remove:"&"},templateUrl:"js/components/expenses/expenses-directive.html"}},ns("ec.expenses"),ec.expenses.module=angular.module("ec.expenses",[]).directive(ec.expenses.EXPENSES_DIRECTIVE_NAME,ec.expenses.expensesDirective).directive(ec.expenses.EXPENSE_LINE_DIRECTIVE_NAME,ec.expenses.expenseLineDirective),ns("ec.footer"),ec.footer.FOOTER_DIRECTIVE_NAME="ecFooter",ec.footer.footerDirective=function(){return{scope:{},templateUrl:"js/components/footer/footer.html"}},ec.footer.module=angular.module("ec.footer",[]).directive(ec.footer.FOOTER_DIRECTIVE_NAME,ec.footer.footerDirective),ns("ec.main.module"),ec.main.MainCtrl=function(e){this.scope_=e,this.scope_.expenses=[]},ec.main.MainCtrl.$inject=["$scope"];var MainCtrl=ec.main.MainCtrl;MainCtrl.prototype.removeItem=function(e){this.scope_.expenses.splice(e,1)},MainCtrl.prototype.getPositiveOrNegativeAmount_=function(e,n){return"+"===n?+e:-e},MainCtrl.prototype.calculateTotal=function(){var e,n,t=this,o=0,s=t.scope_.expenses.length;for(n=0;s>n;n++)e=t.scope_.expenses[n],"+"===e.operation||"-"===e.operation?o+=e.amount:"*"===e.operation?o*=e.times:"/"===e.operation&&(o/=e.split);return o},MainCtrl.prototype.addItem=function(e){var n=/(\+|\-|\/|\*|=|x)?\s?(\d*\.?\d+)?(.*)/,t=this;if(e&&""!==e.trim){var o,s=e.match(n),i=s[1]||"+";if("="===i)return t.scope_.expenses.push({operation:i,amount:t.calculateTotal(),description:"Total"}),void(t.scope_.item="");if("/"===i)return t.scope_.expenses.push({operation:i,split:+s[2],description:"Split by "+s[2]}),o=t.scope_.expenses.length-1,t.scope_.expenses[o].amount=t.calculateTotal(),void(t.scope_.item="");if("*"===i||"x"===i.toLowerCase())return t.scope_.expenses.push({operation:"*",times:+s[2],description:"Times "+s[2]}),o=t.scope_.expenses.length-1,t.scope_.expenses[o].amount=t.calculateTotal(),void(t.scope_.item="");t.scope_.expenses.push({operation:i,amount:t.getPositiveOrNegativeAmount_(s[2],i),description:s[3]||""}),t.scope_.item=""}},ns("ec.application.module"),ec.application.config=function(e){e.when("/",{templateUrl:"js/main/main.html",controller:"MainCtrl",controllerAs:"mainCtrl"}).otherwise({redirectTo:"/"})},ec.application.config.$inject=["$routeProvider"],ec.application.module=angular.module("ecApp",["ngRoute","ngSanitize",ec.expenses.module.name,ec.footer.module.name]),ec.application.module.config(ec.application.config),ec.application.module.controller("MainCtrl",ec.main.MainCtrl),angular.module("ecApp").run(["$templateCache",function(e){e.put("js/main/main.html",'<div class=container><h1>Expenses Calculator</h1><ec-expenses expenses=expenses remove=mainCtrl.removeItem(index)></ec-expenses><form ng-submit=mainCtrl.addItem(item)><input type=text ng-model=item placeholder="15.50 Noodles" autofocus></form></div><ec-footer></ec-footer>'),e.put("js/components/expenses/expense-line.html",'<div ng-click=remove() class="{{ getOperationStyle(expense.operation) }}"><span class=description>{{:: expense.description }}</span> <span class=amount>{{:: expense.amount | currency:"â‚¬" }}</span></div>'),e.put("js/components/expenses/expenses-directive.html",'<ul class=expenses><li class="expense clearfix" ng-repeat="expense in expenses"><ec-expense-line expense=expense remove="remove({index: $index})"></ec-expense-line></li></ul>'),e.put("js/components/footer/footer.html",'<footer><p>Built with <a href="http://angularjs.org/">AngularJs</a>, source code available on <a href=https://github.com/rodolfocaldeira/expenses-calculator>GitHub</a>.</p></footer>')}]);